//! {{flow.name}}
//! {{repeatChar "=" flow.name.length}}
//!
//! Generated by Accumulate Studio
//! Network: {{network}}

#[allow(unused_imports, unused_mut, non_snake_case)]
use accumulate_client::{{lb}}
    AccumulateClient, AccOptions, SmartSigner, TxBody,
    derive_lite_identity_url, derive_lite_token_account_url,
{{rb}};
use sha2::{{lb}}Digest, Sha256{{rb}};
use url::Url;
use serde_json::{{lb}}json, Value{{rb}};

const NETWORK_V2: &str = "https://kermit.accumulatenetwork.io/v2";
const NETWORK_V3: &str = "https://kermit.accumulatenetwork.io/v3";

fn sha256_hash(data: &[u8]) -> String {
    let mut hasher = Sha256::new();
    hasher.update(data);
    hex::encode(hasher.finalize())
}

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    //
    // {{flow.name}}
{{#if flow.description}}
    // {{flow.description}}
{{/if}}
    // Generated by Accumulate Studio
    //

    // Connect to network (override with env vars for testing)
    let v2 = std::env::var("ACCUMULATE_V2_URL").unwrap_or_else(|_| NETWORK_V2.to_string());
    let v3 = std::env::var("ACCUMULATE_V3_URL").unwrap_or_else(|_| NETWORK_V3.to_string());
    let client = AccumulateClient::new_with_options(
        Url::parse(&v2)?, Url::parse(&v3)?, AccOptions::default()
    ).await?;

    let mut tx_ids: Vec<(&str, String)> = Vec::new();

{{#if hasFlowVars}}
    // Flow variables (customize these for your use case)
{{#each flowVarDefs}}
    let {{this.pythonName}} = {{this.rustDefaultValue}};  // {{this.description}}
{{/each}}
{{/if}}
