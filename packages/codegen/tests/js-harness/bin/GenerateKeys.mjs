/**
 * GenerateKeys E2E
 * Generated by Accumulate Studio
 * Network: kermit
 *
 * Install: npm install accumulate.js
 * Run with: node script.mjs
 */

import {
    Accumulate,
    SmartSigner,
    TxBody,
    Ed25519KeyPair,
    KERMIT_V2,
    KERMIT_V3,
} from "accumulate.js";

const V2_ENDPOINT = process.env.ACCUMULATE_V2_URL || KERMIT_V2;
const V3_ENDPOINT = process.env.ACCUMULATE_V3_URL || KERMIT_V3;

async function main() {
    const client = Accumulate.custom(V2_ENDPOINT, V3_ENDPOINT);
    const txIds = [];
    try {


        // =========================================================
        // GenerateKeys (GenerateKeys)
        // =========================================================
        const generatekeysKp = Ed25519KeyPair.generate();
        const generatekeysLid = generatekeysKp.deriveLiteIdentityUrl();
        const generatekeysLta = generatekeysKp.deriveLiteTokenAccountUrl();
        const generatekeysPubHash = generatekeysKp.publicKeyHashHex();
        console.log("Generated keypair:");
        console.log(`  Lite Identity: ${generatekeysLid}`);
        console.log(`  Lite Token Account: ${generatekeysLta}`);
        console.log(`  Public Key Hash: ${generatekeysPubHash}`);


        console.log("\n========== Transaction Summary ==========");
        for (const [label, txid] of txIds) {
            console.log(`  ${label}: ${txid}`);
        }
        console.log("Flow completed successfully!");
    } catch (err) {
        console.error("Flow failed:", err);
    }
}

main().catch(console.error);
